<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Sorted String Table (SSTable) Module"><title>aeternusdb::sstable - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="aeternusdb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.1 (01f6ddf75 2026-02-11)" data-channel="1.93.1" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module sstable</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../aeternusdb/index.html">aeternusdb</a><span class="version">1.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module sstable</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#design-overview" title="Design Overview">Design Overview</a></li><li><a href="#on-disk-layout" title="On-disk layout">On-disk layout</a></li><li><a href="#sub-modules" title="Sub-modules">Sub-modules</a></li><li><a href="#concurrency-model" title="Concurrency model">Concurrency model</a></li><li><a href="#guarantees" title="Guarantees">Guarantees</a></li></ul><h3><a href="#reexports">Module Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate aeternusdb</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">aeternusdb</a></div><h1>Module <span>sstable</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/aeternusdb/sstable/mod.rs.html#1-1166">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Sorted String Table (SSTable) Module</p>
<p>This module implements an <strong>immutable</strong>, <strong>disk-backed</strong>, and <strong>versioned</strong> sorted string table
suitable for embedded databases and key-value storage engines.
It provides <strong>multi-version support</strong>, <strong>range tombstones</strong>, <strong>bloom filter-based point lookups</strong>,
and <strong>LSN+timestamp ordering</strong> for crash-safe reads and merges.</p>
<h3 id="design-overview"><a class="doc-anchor" href="#design-overview">Â§</a>Design Overview</h3>
<p>SSTables store key-value data in <strong>sorted blocks</strong>, allowing efficient point queries and range scans.
Each SSTable is immutable once written. Updates (including deletes) are represented as new entries
with higher <strong>LSN</strong> (Log Sequence Number) and <strong>timestamp</strong>, enabling multiple versions of the same key.</p>
<p><strong>Point deletes</strong> and <strong>range tombstones</strong> are stored as special entries to allow fast pruning
during reads and merges. Bloom filters are maintained per SSTable for quick existence checks
before scanning blocks.</p>
<p>Data is serialized using a custom <a href="../encoding/index.html" title="mod aeternusdb::encoding"><code>encoding</code></a> module with <strong>fixed integer encoding</strong>, and block-level CRC32
checksums ensure corruption detection.</p>
<h2 id="on-disk-layout"><a class="doc-anchor" href="#on-disk-layout">Â§</a>On-disk layout</h2><div class="example-wrap"><pre class="language-text"><code>[HEADER_BYTES]
[DATA_BLOCK_LEN_LE][DATA_BLOCK_BYTES][DATA_BLOCK_CRC32_LE]
[DATA_BLOCK_LEN_LE][DATA_BLOCK_BYTES][DATA_BLOCK_CRC32_LE]
...
[BLOOM_FILTER_LEN_LE][BLOOM_FILTER_BYTES][BLOOM_FILTER_CRC32_LE]
[RANGE_DELETES_LEN_LE][RANGE_DELETES_BYTES][RANGE_DELETES_CRC32_LE]
[PROPERTIES_LEN_LE][PROPERTIES_BYTES][PROPERTIES_CRC32_LE]
[METAINDEX_LEN_LE][METAINDEX_BYTES][METAINDEX_CRC32_LE]
[INDEX_LEN_LE][INDEX_BYTES][INDEX_CRC32_LE]
[FOOTER_BYTES]</code></pre></div>
<ul>
<li><strong>Header</strong> â€” <code>SSTableHeader</code> structure with CRC32 checksum.</li>
<li><strong>Data blocks</strong> â€” store serialized <code>SSTableCell</code> entries (key-value or tombstone).</li>
<li><strong>Bloom filter block</strong> â€” fast existence checks for point keys.</li>
<li><strong>Range deletes block</strong> â€” serialized <code>SSTableRangeTombstoneCell</code> entries.</li>
<li><strong>Properties block</strong> â€” table metadata such as min/max key, LSNs, timestamps, record counts.</li>
<li><strong>Metaindex block</strong> â€” directory of blocks (bloom, properties, range deletes) for easy lookup.</li>
<li><strong>Index block</strong> â€” directory of data blocks, allowing binary search for keys.</li>
<li><strong>Footer</strong> â€” <code>SSTableFooter</code> structure containing offsets, sizes, and CRC32 checksum.</li>
</ul>
<h2 id="sub-modules"><a class="doc-anchor" href="#sub-modules">Â§</a>Sub-modules</h2>
<ul>
<li><a href="builder/index.html" title="mod aeternusdb::sstable::builder"><code>builder</code></a> â€” <a href="builder/struct.SstWriter.html" title="struct aeternusdb::sstable::builder::SstWriter"><code>SstWriter</code></a> for building SSTables from sorted streams.</li>
<li><a href="iterator/index.html" title="mod aeternusdb::sstable::iterator"><code>iterator</code></a> â€” <a href="iterator/struct.BlockIterator.html" title="struct aeternusdb::sstable::iterator::BlockIterator"><code>BlockIterator</code></a>, <a href="iterator/struct.BlockEntry.html" title="struct aeternusdb::sstable::iterator::BlockEntry"><code>BlockEntry</code></a>, and <a href="iterator/struct.ScanIterator.html" title="struct aeternusdb::sstable::iterator::ScanIterator"><code>ScanIterator</code></a> for reading.</li>
</ul>
<h2 id="concurrency-model"><a class="doc-anchor" href="#concurrency-model">Â§</a>Concurrency model</h2>
<ul>
<li>SSTables are <strong>immutable</strong>, so reads are lock-free and thread-safe.</li>
<li>Multiple readers can safely access the same SSTable concurrently.</li>
<li>No writes occur in-place; updates are appended via <strong>new SSTables</strong>.</li>
<li>Multi-versioning ensures that readers always see a consistent snapshot.</li>
</ul>
<h2 id="guarantees"><a class="doc-anchor" href="#guarantees">Â§</a>Guarantees</h2>
<ul>
<li><strong>Immutability:</strong> Once written, an SSTable is never modified.</li>
<li><strong>Multi-version support:</strong> Multiple versions of the same key are preserved with LSN+timestamp ordering.</li>
<li><strong>Range deletes:</strong> Efficient representation and merging of point/range deletions.</li>
<li><strong>Integrity:</strong> Each block and footer contains CRC32 checksums to detect corruption.</li>
<li><strong>Fast point lookups:</strong> Bloom filter reduces unnecessary block scans.</li>
<li><strong>Safe merges:</strong> SSTables can be safely merged without affecting existing readers.</li>
<li><strong>Crash recovery:</strong> Files are written atomically using temporary paths and rename-on-success.</li>
</ul>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">Â§</a></h2><dl class="item-table reexports"><dt id="reexport.PointEntry"><code>pub use crate::engine::<a class="struct" href="../engine/utils/struct.PointEntry.html" title="struct aeternusdb::engine::utils::PointEntry">PointEntry</a>;</code></dt><dt id="reexport.RangeTombstone"><code>pub use crate::engine::<a class="struct" href="../engine/utils/struct.RangeTombstone.html" title="struct aeternusdb::engine::utils::RangeTombstone">RangeTombstone</a>;</code></dt><dt id="reexport.Record"><code>pub use crate::engine::<a class="enum" href="../engine/utils/enum.Record.html" title="enum aeternusdb::engine::utils::Record">Record</a>;</code></dt><dt id="reexport.SstWriter"><code>pub use builder::<a class="struct" href="builder/struct.SstWriter.html" title="struct aeternusdb::sstable::builder::SstWriter">SstWriter</a>;</code></dt><dt id="reexport.BlockEntry"><code>pub use iterator::<a class="struct" href="iterator/struct.BlockEntry.html" title="struct aeternusdb::sstable::iterator::BlockEntry">BlockEntry</a>;</code></dt><dt id="reexport.BlockIterator"><code>pub use iterator::<a class="struct" href="iterator/struct.BlockIterator.html" title="struct aeternusdb::sstable::iterator::BlockIterator">BlockIterator</a>;</code></dt><dt id="reexport.ScanIterator"><code>pub use iterator::<a class="struct" href="iterator/struct.ScanIterator.html" title="struct aeternusdb::sstable::iterator::ScanIterator">ScanIterator</a>;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="mod" href="builder/index.html" title="mod aeternusdb::sstable::builder">builder</a></dt><dd>SSTable writer â€” builds a complete SSTable file from sorted iterators.</dd><dt><a class="mod" href="iterator/index.html" title="mod aeternusdb::sstable::iterator">iterator</a></dt><dd>SSTable iterators â€” block-level and multi-block scan.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.BlockHandle.html" title="struct aeternusdb::sstable::BlockHandle">Block<wbr>Handle</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Handle to a block in the SSTable file, specifying its offset and size.</dd><dt><a class="struct" href="struct.MetaIndexEntry.html" title="struct aeternusdb::sstable::MetaIndexEntry">Meta<wbr>Index<wbr>Entry</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a single entry in the metaindex block.</dd><dt><a class="struct" href="struct.SSTable.html" title="struct aeternusdb::sstable::SSTable">SSTable</a></dt><dd>A fully memory-mapped, immutable <strong>Sorted String Table (SSTable)</strong>.</dd><dt><a class="struct" href="struct.SSTableBloomBlock.html" title="struct aeternusdb::sstable::SSTableBloomBlock">SSTable<wbr>Bloom<wbr>Block</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a Bloom filter block used to quickly check the presence of point keys.</dd><dt><a class="struct" href="struct.SSTableCell.html" title="struct aeternusdb::sstable::SSTableCell">SSTable<wbr>Cell</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a single key-value entry (or tombstone) in a data block.</dd><dt><a class="struct" href="struct.SSTableDataBlock.html" title="struct aeternusdb::sstable::SSTableDataBlock">SSTable<wbr>Data<wbr>Block</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a data block in the SSTable, which contains serialized key-value entries.</dd><dt><a class="struct" href="struct.SSTableFooter.html" title="struct aeternusdb::sstable::SSTableFooter">SSTable<wbr>Footer</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>SSTable footer, stored at the very end of the file.</dd><dt><a class="struct" href="struct.SSTableHeader.html" title="struct aeternusdb::sstable::SSTableHeader">SSTable<wbr>Header</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>SSTable file header, written at the beginning of the SSTable.
Contains a magic number, version, and CRC32 checksum for integrity.</dd><dt><a class="struct" href="struct.SSTableIndexEntry.html" title="struct aeternusdb::sstable::SSTableIndexEntry">SSTable<wbr>Index<wbr>Entry</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Index entry pointing to a specific data block.</dd><dt><a class="struct" href="struct.SSTablePropertiesBlock.html" title="struct aeternusdb::sstable::SSTablePropertiesBlock">SSTable<wbr>Properties<wbr>Block</a></dt><dd>Metadata block containing SSTable-level properties and statistics.</dd><dt><a class="struct" href="struct.SSTableRangeTombstoneCell.html" title="struct aeternusdb::sstable::SSTableRangeTombstoneCell">SSTable<wbr>Range<wbr>Tombstone<wbr>Cell</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a range tombstone marking deletion of keys in <code>[start_key, end_key)</code>.</dd><dt><a class="struct" href="struct.SSTableRangeTombstoneDataBlock.html" title="struct aeternusdb::sstable::SSTableRangeTombstoneDataBlock">SSTable<wbr>Range<wbr>Tombstone<wbr>Data<wbr>Block</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Represents a block containing range tombstones.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.GetResult.html" title="enum aeternusdb::sstable::GetResult">GetResult</a></dt><dd>Result of a single key lookup in an SSTable.</dd><dt><a class="enum" href="enum.SSTableError.html" title="enum aeternusdb::sstable::SSTableError">SSTable<wbr>Error</a></dt><dd>Errors returned by SSTable operations (read, write, build).</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.SST_BLOOM_FILTER_FALSE_POSITIVE_RATE.html" title="constant aeternusdb::sstable::SST_BLOOM_FILTER_FALSE_POSITIVE_RATE">SST_<wbr>BLOOM_<wbr>FILTER_<wbr>FALSE_<wbr>POSITIVE_<wbr>RATE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_DATA_BLOCK_CHECKSUM_SIZE.html" title="constant aeternusdb::sstable::SST_DATA_BLOCK_CHECKSUM_SIZE">SST_<wbr>DATA_<wbr>BLOCK_<wbr>CHECKSUM_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_DATA_BLOCK_LEN_SIZE.html" title="constant aeternusdb::sstable::SST_DATA_BLOCK_LEN_SIZE">SST_<wbr>DATA_<wbr>BLOCK_<wbr>LEN_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_DATA_BLOCK_MAX_SIZE.html" title="constant aeternusdb::sstable::SST_DATA_BLOCK_MAX_SIZE">SST_<wbr>DATA_<wbr>BLOCK_<wbr>MAX_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_FOOTER_SIZE.html" title="constant aeternusdb::sstable::SST_FOOTER_SIZE">SST_<wbr>FOOTER_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_HDR_MAGIC.html" title="constant aeternusdb::sstable::SST_HDR_MAGIC">SST_<wbr>HDR_<wbr>MAGIC</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_HDR_SIZE.html" title="constant aeternusdb::sstable::SST_HDR_SIZE">SST_<wbr>HDR_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="constant" href="constant.SST_HDR_VERSION.html" title="constant aeternusdb::sstable::SST_HDR_VERSION">SST_<wbr>HDR_<wbr>VERSION</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt></dl></section></div></main></body></html>