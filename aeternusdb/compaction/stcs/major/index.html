<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Major compaction â€” full merge of all SSTables."><title>aeternusdb::compaction::stcs::major - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="aeternusdb" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.1 (01f6ddf75 2026-02-11)" data-channel="1.93.1" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module major</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../aeternusdb/index.html">aeternusdb</a><span class="version">1.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module major</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#option-b-implementation" title="Option B implementation">Option B implementation</a></li></ul><h3><a href="#functions">Module Items</a></h3><ul class="block"><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In aeternusdb::<wbr>compaction::<wbr>stcs</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../../index.html">aeternusdb</a>::<wbr><a href="../../index.html">compaction</a>::<wbr><a href="../index.html">stcs</a></div><h1>Module <span>major</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/aeternusdb/compaction/stcs/major.rs.html#1-165">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Major compaction â€” full merge of all SSTables.</p>
<p>Merges <strong>every</strong> SSTable into a single new SSTable, applying range
tombstones actively to suppress covered point entries. Since the
entire dataset is being merged, all spent tombstones (both point
and range) are dropped from the output â€” thereâ€™s nothing left for
them to suppress.</p>
<h3 id="option-b-implementation"><a class="doc-anchor" href="#option-b-implementation">Â§</a>Option B implementation</h3>
<p>During the merge, each point entry is checked against the collected
range tombstones. If a Put has a lower LSN than a covering range
tombstone, it is suppressed (not written to the output).</p>
<p>After all entries are processed:</p>
<ul>
<li>Point tombstones (Delete) are dropped entirely â€” the corresponding
Put (if any) has already been suppressed or isnâ€™t present.</li>
<li>Range tombstones are dropped entirely â€” all covered data was
suppressed during the merge.</li>
</ul>
</div></details><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.compact.html" title="fn aeternusdb::compaction::stcs::major::compact">compact</a></dt><dd>Executes a major compaction, merging all SSTables into one.</dd><dt><a class="fn" href="fn.execute.html" title="fn aeternusdb::compaction::stcs::major::execute">execute</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dt><a class="fn" href="fn.is_suppressed_by_range.html" title="fn aeternusdb::compaction::stcs::major::is_suppressed_by_range">is_<wbr>suppressed_<wbr>by_<wbr>range</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Returns <code>true</code> if the given key+lsn is suppressed by any range
tombstone with a strictly higher LSN.</dd></dl></section></div></main></body></html>